(()=>{"use strict";var e,l={69:(e,l,t)=>{var i=t(997),n=t(715),a=t(790);const s=JSON.parse('{"UU":"planet4-child-theme-switzerland/food-quiz-result-tier"}');(0,i.registerBlockType)(s.UU,{edit:function({attributes:e}){const{tierIndex:l=0}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{...(0,n.useBlockProps)({className:"food-quiz__tier-editor"}),children:(0,a.jsx)(n.InnerBlocks,{allowedBlocks:["core/paragraph","core/heading","core/image"],template:[["core/heading",{content:"Result Tier "+(l+1),className:"is-style-no-underline"}],["core/paragraph",{content:"Lorem ipsum..."}]],templateLock:!1,renderAppender:n.InnerBlocks.ButtonBlockAppender})})})},save:function({attributes:e}){const{tierIndex:l=0}=e;return(0,a.jsx)("div",{...n.useBlockProps.save(),className:"food-quiz__tier","data-tier":l,children:(0,a.jsx)(n.InnerBlocks.Content,{})})}})},715:e=>{e.exports=window.wp.blockEditor},790:e=>{e.exports=window.ReactJSXRuntime},872:(e,l,t)=>{var i=t(997);t(69);const n=window.wp.i18n;var a=t(715);const s=window.wp.components,r=window.wp.element,o=window.wp.data;var d=t(790);function c({open:e,title:l,message:t,confirmLabel:i,cancelLabel:a,onClose:r,onConfirm:o}){if(!e)return null;const c=l||(0,n.__)("Confirm","planet4-child-theme-switzerland"),h=t||(0,n.__)("Are you sure?","planet4-child-theme-switzerland"),m=i||(0,n.__)("Remove","planet4-child-theme-switzerland"),u=a||(0,n.__)("Cancel","planet4-child-theme-switzerland");return(0,d.jsxs)(s.Modal,{title:c,onRequestClose:r,children:[(0,d.jsx)("p",{children:h}),(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[(0,d.jsx)(s.Button,{variant:"secondary",onClick:r,children:u}),(0,d.jsx)(s.Button,{isDestructive:!0,onClick:o,children:m})]})]})}const h=window.wp.primitives;var m=(0,d.jsx)(h.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)(h.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})}),u=(0,d.jsx)(h.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)(h.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})}),p=(0,d.jsx)(h.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,d.jsx)(h.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12 5.5A2.25 2.25 0 0 0 9.878 7h4.244A2.251 2.251 0 0 0 12 5.5ZM12 4a3.751 3.751 0 0 0-3.675 3H5v1.5h1.27l.818 8.997a2.75 2.75 0 0 0 2.739 2.501h4.347a2.75 2.75 0 0 0 2.738-2.5L17.73 8.5H19V7h-3.325A3.751 3.751 0 0 0 12 4Zm4.224 4.5H7.776l.806 8.861a1.25 1.25 0 0 0 1.245 1.137h4.347a1.25 1.25 0 0 0 1.245-1.137l.805-8.861Z"})});const x=JSON.parse('{"UU":"planet4-child-theme-switzerland/food-quiz"}');(0,i.registerBlockType)(x.UU,{edit:function({attributes:e,setAttributes:l,clientId:t}){const{breakfastMeals:i=[],lunchMeals:h=[],dinnerMeals:x=[],drinks:_=[],tierLabels:w=[],tierThresholds:f=[]}=e;function v(e,t,n,a){const s=("breakfast"===e?i:"lunch"===e?h:x).map((e,l)=>l===t?{...e,[n]:a}:e);l({[`${e}Meals`]:s})}function j(e,t,n){const a=("breakfast"===e?i:"lunch"===e?h:x).slice(),s=t+n;s<0||s>=a.length||([a[t],a[s]]=[a[s],a[t]],l({[`${e}Meals`]:a}))}function k(e,t,i){const n=_.map((l,n)=>n===e?{...l,[t]:i}:l);l({drinks:n})}function z(e,t){const i=_.slice(),n=e+t;n<0||n>=i.length||([i[e],i[n]]=[i[n],i[e]],l({drinks:i}))}const[g,b]=(0,r.useState)({open:!1,kind:null,setName:null,index:null}),[N,q]=(0,r.useState)(0),y=(0,o.useSelect)(e=>t&&e("core/block-editor").getBlocks(t)||[],[t]),{selectBlock:C}=(0,o.useDispatch)("core/block-editor");return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(a.InspectorControls,{children:[(i.length<=1||h.length<=1||x.length<=1)&&(0,d.jsx)(s.Notice,{status:"warning",children:(0,n.__)("Add at least 2 options for each meal time to make the quiz meaningful.","planet4-child-theme-switzerland")}),[["breakfast",i],["lunch",h],["dinner",x]].map(([e,t])=>(0,d.jsx)(s.PanelBody,{title:e.charAt(0).toUpperCase()+e.slice(1)+" meals",initialOpen:!1,children:(0,d.jsxs)("div",{className:"food-quiz__meal-set",children:[t.map((l,i)=>(0,d.jsxs)("div",{className:"food-quiz__editor-item",children:[(0,d.jsxs)("h3",{children:[(0,n.__)("Meal","planet4-child-theme-switzerland")," #",i+1]}),(0,d.jsx)(s.TextControl,{label:(0,n.__)("Title","planet4-child-theme-switzerland"),value:l.title,onChange:l=>v(e,i,"title",l)}),(0,d.jsx)(s.RangeControl,{label:(0,n.__)("Climate impact score","planet4-child-theme-switzerland"),min:0,max:100,value:l.score,onChange:l=>v(e,i,"score",l)}),(0,d.jsxs)(s.PanelRow,{children:[(0,d.jsx)(a.MediaUploadCheck,{children:(0,d.jsx)(a.MediaUpload,{onSelect:l=>v(e,i,"imageUrl",l.url),render:({open:e})=>(0,d.jsx)(s.Button,{onClick:e,variant:"secondary",children:l.imageUrl?(0,d.jsx)("img",{src:l.imageUrl,alt:"",style:{width:60,height:60,objectFit:"cover"}}):"Choose image"})})}),(0,d.jsxs)("div",{className:"food-quiz__editor-controls",children:[(0,d.jsx)(s.Button,{icon:m,onClick:()=>j(e,i,-1),disabled:0===i,label:(0,n.__)("Move up","planet4-child-theme-switzerland"),showTooltip:!0}),(0,d.jsx)(s.Button,{icon:u,onClick:()=>j(e,i,1),disabled:i===t.length-1,label:(0,n.__)("Move down","planet4-child-theme-switzerland"),showTooltip:!0}),(0,d.jsx)(s.Button,{icon:p,onClick:()=>function(e,l){b({open:!0,kind:"meal",setName:e,index:l})}(e,i),isDestructive:!0,label:(0,n.__)("Remove","planet4-child-theme-switzerland"),showTooltip:!0})]})]})]},i)),(0,d.jsx)("div",{style:{marginTop:10},children:(0,d.jsx)(s.Button,{variant:"primary",onClick:()=>function(e){const t="breakfast"===e?i:"lunch"===e?h:x;t.length>=4||l({[`${e}Meals`]:[...t,{title:"New meal",score:1,imageUrl:""}]})}(e),disabled:t.length>=8,children:(0,n.__)("Add meal","planet4-child-theme-switzerland")})})]})},e)),(0,d.jsxs)(s.PanelBody,{title:(0,n.__)("Drinks","planet4-child-theme-switzerland"),initialOpen:!1,children:[_.map((e,l)=>(0,d.jsxs)("div",{className:"food-quiz__editor-item",children:[(0,d.jsxs)("h3",{children:[(0,n.__)("Drink","planet4-child-theme-switzerland")," #",l+1]}),(0,d.jsx)(s.TextControl,{label:(0,n.__)("Title","planet4-child-theme-switzerland"),value:e.title,onChange:e=>k(l,"title",e)}),(0,d.jsx)(s.RangeControl,{label:(0,n.__)("Climate impact score (per serving)","planet4-child-theme-switzerland"),min:0,max:100,value:e.score,onChange:e=>k(l,"score",e)}),(0,d.jsx)(s.PanelRow,{children:(0,d.jsxs)("div",{className:"food-quiz__editor-controls",children:[(0,d.jsx)(s.Button,{icon:m,onClick:()=>z(l,-1),disabled:0===l,label:(0,n.__)("Move up","planet4-child-theme-switzerland"),showTooltip:!0}),(0,d.jsx)(s.Button,{icon:u,onClick:()=>z(l,1),disabled:l===_.length-1,label:(0,n.__)("Move down","planet4-child-theme-switzerland"),showTooltip:!0}),(0,d.jsx)(s.Button,{icon:p,onClick:()=>{b({open:!0,kind:"drink",setName:null,index:l})},isDestructive:!0,label:(0,n.__)("Remove","planet4-child-theme-switzerland"),showTooltip:!0})]})})]},l)),(0,d.jsx)("div",{style:{marginTop:10},children:(0,d.jsx)(s.Button,{variant:"primary",onClick:function(){_.length>=8||l({drinks:[..._,{title:"New drink",score:0}]})},disabled:_.length>=10,children:(0,n.__)("Add drink","planet4-child-theme-switzerland")})})]}),(0,d.jsx)(s.PanelBody,{title:(0,n.__)("Result Tier Settings","planet4-child-theme-switzerland"),initialOpen:!1,children:Array.from({length:Math.max(w.length,5)}).map((e,t)=>(0,d.jsxs)("div",{className:"food-quiz__tier-config",children:[(0,d.jsxs)("h3",{children:[(0,n.__)("Tier","planet4-child-theme-switzerland")," #",t+1]}),(0,d.jsx)(s.TextControl,{label:"Label",value:w[t]||"",onChange:e=>{const i=Math.max(5,w.length||0),n=Array.from({length:i}).map((l,i)=>{var n;return i===t?e:null!==(n=w[i])&&void 0!==n?n:""});l({tierLabels:n})}}),t<4?(0,d.jsx)(s.RangeControl,{label:(0,n.__)("Upper threshold (show this tier when score ≤)","planet4-child-theme-switzerland"),min:1,max:1e3,value:"number"==typeof f[t]?f[t]:0,onChange:e=>{const i=Math.max(5,f.length||0),n=Array.from({length:i}).map((l,i)=>{var n;return i===t?e:null!==(n=f[i])&&void 0!==n?n:null});l({tierThresholds:n})}}):(0,d.jsx)(s.PanelRow,{children:(0,d.jsx)("span",{children:(0,d.jsx)("strong",{children:(0,n.__)("Upper threshold: Infinite","planet4-child-theme-switzerland")})})})]},t))})]}),(0,d.jsx)(c,{open:g.open,title:(0,n.__)("Confirm removal","planet4-child-theme-switzerland"),message:"drink"===g.kind?(0,n.__)("Are you sure you want to remove this drink?","planet4-child-theme-switzerland"):(0,n.__)("Are you sure you want to remove this meal?","planet4-child-theme-switzerland"),onClose:function(){b({open:!1,kind:null,setName:null,index:null})},onConfirm:function(){var e;"meal"===g.kind&&null!==g.setName?function(e,t){const n="breakfast"===e?i:"lunch"===e?h:x;l({[`${e}Meals`]:n.filter((e,l)=>l!==t)})}(g.setName,g.index):"drink"===g.kind&&(e=g.index,l({drinks:_.filter((l,t)=>t!==e)})),b({open:!1,kind:null,setName:null,index:null})}}),(0,d.jsx)("div",{...(0,a.useBlockProps)(),className:"food-quiz food-quiz__editor",children:(0,d.jsxs)("div",{className:"food-quiz__editor-preview",children:[(0,d.jsx)("div",{className:"food-quiz__meal-times",children:["Breakfast","Lunch","Dinner"].map(e=>(0,d.jsxs)("div",{className:"food-quiz__meal",children:[(0,d.jsx)("h3",{children:e}),(0,d.jsx)("div",{className:"food-quiz__meal-options",children:("Breakfast"===e?i:"Lunch"===e?h:x).slice(0,4).map((l,t)=>(0,d.jsxs)("label",{className:"fq-option",htmlFor:"{`preview-${ time }`}",children:[(0,d.jsx)("input",{type:"radio",name:`preview-${e}`}),(0,d.jsx)("p",{className:"fq-option-title",children:l.title}),(0,d.jsx)("div",{className:"fq-option-img",children:l.imageUrl?(0,d.jsx)("img",{src:l.imageUrl,alt:""}):null})]},t))})]},e))}),(0,d.jsxs)("div",{className:"food-quiz__drinks",children:[(0,d.jsx)("h3",{children:(0,n.__)("Drinks","planet4-child-theme-switzerland")}),(0,d.jsx)("div",{className:"food-quiz__drink-options",children:_.map((e,l)=>(0,d.jsxs)("div",{className:"fq-drink-wrapper",children:[(0,d.jsx)("p",{className:"fq-option-title",children:e.title}),(0,d.jsxs)("div",{className:"fq-drink-controls",children:[(0,d.jsx)("button",{type:"button",className:"fq-drink-decrease","aria-label":"Decrease",children:"−"}),(0,d.jsx)("input",{type:"number",min:"0",max:"5",value:"0","data-index":"0",className:"fq-drink-input",readOnly:!0}),(0,d.jsx)("button",{type:"button",className:"fq-drink-increase","aria-label":"Increase",children:"+"})]})]},l))})]}),(0,d.jsx)("hr",{}),(0,d.jsxs)("div",{className:"food-quiz__tiers-editor",children:[(0,d.jsx)("h3",{children:(0,n.__)("Result descriptions (edit each tier below)","planet4-child-theme-switzerland")}),(0,d.jsx)("div",{className:"food-quiz__tiers-tabs",children:Array.from({length:Math.max(w.length,5)}).map((e,l)=>(0,d.jsxs)("button",{type:"button",className:"fq-tab "+(l===N?"is-active":""),onClick:()=>{q(l),y&&y[l]&&C(y[l].clientId)},children:[w[l]||`ResultTier ${l+1}`," ",(0,d.jsxs)("small",{children:["(≤",null!==f[l]&&void 0!==f[l]?f[l]:"∞",")"]})]},l))}),(0,d.jsx)("div",{className:`food-quiz__tiers-inner active-tier-${N}`,children:(0,d.jsx)(a.InnerBlocks,{allowedBlocks:["planet4-child-theme-switzerland/food-quiz-result-tier"],template:[["planet4-child-theme-switzerland/food-quiz-result-tier",{tierIndex:0}],["planet4-child-theme-switzerland/food-quiz-result-tier",{tierIndex:1}],["planet4-child-theme-switzerland/food-quiz-result-tier",{tierIndex:2}],["planet4-child-theme-switzerland/food-quiz-result-tier",{tierIndex:3}],["planet4-child-theme-switzerland/food-quiz-result-tier",{tierIndex:4}]],templateLock:"all"})})]})]})})]})},save:function({attributes:e}){const{breakfastMeals:l=[],lunchMeals:t=[],dinnerMeals:i=[],drinks:s=[],tierLabels:r=[],tierThresholds:o=[]}=e,c=a.useBlockProps.save();return(0,d.jsxs)("div",{...c,className:(c.className||"")+" food-quiz","data-breakfast-meals":JSON.stringify(l),"data-lunch-meals":JSON.stringify(t),"data-dinner-meals":JSON.stringify(i),"data-drinks":JSON.stringify(s),"data-tier-thresholds":JSON.stringify(o),"data-tier-labels":JSON.stringify(r),children:[(0,d.jsxs)("div",{className:"food-quiz__meal-times",children:[(0,d.jsx)("div",{className:"food-quiz__meal","data-time":"breakfast","data-title":(0,n.__)("Breakfast","planet4-child-theme-switzerland"),"aria-label":"Breakfast"}),(0,d.jsx)("div",{className:"food-quiz__meal","data-time":"lunch","data-title":(0,n.__)("Lunch","planet4-child-theme-switzerland"),"aria-label":"Lunch"}),(0,d.jsx)("div",{className:"food-quiz__meal","data-time":"dinner","data-title":(0,n.__)("Dinner","planet4-child-theme-switzerland"),"aria-label":"Dinner"})]}),(0,d.jsx)("div",{className:"food-quiz__drinks","data-title":(0,n.__)("Drinks","planet4-child-theme-switzerland")}),(0,d.jsxs)("div",{className:"food-quiz__result",children:[(0,d.jsx)("div",{className:"wp-block-group read-more-nav is-layout-flow wp-block-group-is-layout-flow",children:(0,d.jsx)("button",{type:"button",className:"btn btn-primary food-quiz__calculate","aria-label":"{__('Calculate', 'planet4-child-theme-switzerland')}",children:(0,n.__)("Calculate","planet4-child-theme-switzerland")})}),(0,d.jsxs)("div",{className:"food-quiz__result-output",children:[(0,d.jsx)("div",{className:"error-message",children:(0,n.__)("Please select at least one of each meal.","planet4-child-theme-switzerland")}),(0,d.jsx)("div",{className:"result-scale"}),(0,d.jsx)(a.InnerBlocks.Content,{})]})]})]})}})},997:e=>{e.exports=window.wp.blocks}},t={};function i(e){var n=t[e];if(void 0!==n)return n.exports;var a=t[e]={exports:{}};return l[e](a,a.exports,i),a.exports}i.m=l,e=[],i.O=(l,t,n,a)=>{if(!t){var s=1/0;for(c=0;c<e.length;c++){for(var[t,n,a]=e[c],r=!0,o=0;o<t.length;o++)(!1&a||s>=a)&&Object.keys(i.O).every(e=>i.O[e](t[o]))?t.splice(o--,1):(r=!1,a<s&&(s=a));if(r){e.splice(c--,1);var d=n();void 0!==d&&(l=d)}}return l}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[t,n,a]},i.o=(e,l)=>Object.prototype.hasOwnProperty.call(e,l),(()=>{var e={222:0,319:0,63:0};i.O.j=l=>0===e[l];var l=(l,t)=>{var n,a,[s,r,o]=t,d=0;if(s.some(l=>0!==e[l])){for(n in r)i.o(r,n)&&(i.m[n]=r[n]);if(o)var c=o(i)}for(l&&l(t);d<s.length;d++)a=s[d],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(c)},t=globalThis.webpackChunkplanet4_child_theme_switzerland=globalThis.webpackChunkplanet4_child_theme_switzerland||[];t.forEach(l.bind(null,0)),t.push=l.bind(null,t.push.bind(t))})();var n=i.O(void 0,[63],()=>i(872));n=i.O(n)})();