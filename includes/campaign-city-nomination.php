<?php
/*
 * Contains customizations for the CCC City nomination campaign.
 */

/**
 * Populates the options of select fields with all swiss city names when the custom class name is 'populate-cities'.
 *
 * @param array $form The form object containing an array of fields to be processed.
 */
function gpch_populate_cities( $form ) {
	foreach ( $form['fields'] as &$field ) {
		if ( $field->type != 'select' || strpos( $field->cssClass, 'populate-cities' ) === false ) {
			continue;
		}

		// All Swiss cities
		$cities = array('Aadorf','Aarau','Aarberg','Aarburg','Aarwangen','Abtwil','Adelboden','Adligenswil','Adliswil','Aedermannsdorf','Aefligen','Aegerten','Aesch (BL)','Aesch (LU)','Aesch (ZH)','Aeschi (SO)','Aeschi bei Spiez','Aeugst am Albis','Affeltrangen','Affoltern am Albis','Affoltern im Emmental','Agarn','Alberswil','Albinen','Albula/Alvra','Alchenstorf','Allmendingen','Allschwil','Alpnach','Alpthal','Altbüron','Altdorf (UR)','Altendorf','Altikon','Altishofen','Altnau','Altstätten','Amden','Amlikon-Bissegg','Ammerswil','Amriswil','Amsoldingen','Andeer','Andelfingen','Andermatt','Andwil (SG)','Anwil','Appenzell','Arboldswil','Arbon','Arch','Arisdorf','Aristau','Arlesheim','Arni (AG)','Arni (BE)','Arosa','Arth','Attinghausen','Attiswil','Au (SG)','Auenstein','Augst','Ausserberg','Auswil','Auw','Avers','Baar','Bachenbülach','Bachs','Bad Ragaz','Baden','Balgach','Ballwil','Balm bei Günsberg','Balsthal','Baltschieder','Bannwil','Bäretswil','Bargen (BE)','Bargen (SH)','Bäriswil','Bärschwil','Basadingen-Schlattingen','Basel','Bassersdorf','Bätterkinden','Bättwil','Bauma','Beatenberg','Beckenried','Beggingen','Beinwil (Freiamt)','Beinwil (SO)','Beinwil am See','Bellach','Bellikon','Bellmund','Bellwald','Belp','Benken (SG)','Benken (ZH)','Bennwil','Berg (SG)','Berg (TG)','Berg am Irchel','Bergdietikon','Bergün Filisur','Berikon','Beringen','Berken','Berlingen','Bern','Berneck','Beromünster','Besenbüren','Bettenhausen','Bettingen','Bettlach','Bettmeralp','Bettwiesen','Bettwil','Bever','Biberist','Biberstein','Bichelsee-Balterswil','Biel-Benken','Biezwil','Biglen','Binn','Binningen','Birmensdorf (ZH)','Birmenstorf (AG)','Birr','Birrhard','Birrwil','Birsfelden','Birwinken','Bischofszell','Bister','Bitsch','Blatten','Blauen','Bleienbach','Blumenstein','Böckten','Bolken','Bolligen','Boltigen','Bonaduz','Bönigen','Boningen','Boniswil','Bonstetten','Boppelsen','Bösingen','Boswil','Bottenwil','Bottighofen','Bottmingen','Böttstein','Bowil','Bözberg','Böztal','Braunau','Breil/Brigels','Breitenbach','Bremgarten (AG)','Bremgarten bei Bern','Brenzikofen','Bretzwil','Brienz (BE)','Brienzwiler','Brig-Glis','Brislach','Brittnau','Brugg','Brügg','Brunegg','Brünisried','Brüttelen','Brütten','Bubendorf','Bubikon','Buch (SH)','Buch am Irchel','Buchberg','Buchegg','Buchholterberg','Buchrain','Buchs (AG)','Buchs (SG)','Buchs (ZH)','Buckten','Büetigen','Bühl','Bühler','Bülach','Bünzen','Buochs','Büren (SO)','Büren an der Aare','Burg im Leimental','Burgdorf','Burgistein','Bürglen (TG)','Bürglen (UR)','Büron','Büsserach','Bussnang','Busswil bei Melchnau','Bütschwil-Ganterschwil','Büttenhardt','Büttikon','Buttisholz','Buttwil','Buus','Cazis','Celerina/Schlarigna','Cham','Chur','Churwalden','Conters im Prättigau','Dachsen','Dägerlen','Dagmersellen','Dallenwil','Dällikon','Däniken','Dänikon','Därligen','Därstetten','Dättlikon','Davos','Degersheim','Deisswil bei Münchenbuchsee','Deitingen','Densbüren','Derendingen','Diegten','Dielsdorf','Diemtigen','Diepflingen','Diepoldsau','Dierikon','Diessbach bei Büren','Diessenhofen','Dietikon','Dietlikon','Dietwil','Dinhard','Dintikon','Dittingen','Domat/Ems','Domleschg','Doppleschwand','Dorf','Dörflingen','Dornach','Dottikon','Döttingen','Dotzigen','Dozwil','Drei Höfe','Dübendorf','Düdingen','Duggingen','Dulliken','Dürnten','Dürrenäsch','Dürrenroth','Ebikon','Ebnat-Kappel','Egerkingen','Egg','Eggenwil','Eggerberg','Eggersriet','Eggiwil','Eglisau','Egliswil','Egnach','Egolzwil','Ehrendingen','Eich','Eichberg','Eiken','Einsiedeln','Eischoll','Eisten','Elgg','Ellikon an der Thur','Elsau','Embd','Embrach','Emmen','Emmetten','Endingen','Engelberg','Ennetbaden','Ennetbürgen','Ennetmoos','Entlebuch','Eppenberg-Wöschnau','Epsach','Eptingen','Ergisch','Eriswil','Eriz','Erlach','Erlen','Erlenbach (ZH)','Erlenbach im Simmental','Erlinsbach (AG)','Erlinsbach (SO)','Ermatingen','Ermensee','Ernen','Erschwil','Ersigen','Erstfeld','Eschenbach (LU)','Eschenbach (SG)','Eschenz','Eschlikon','Escholzmatt-Marbach','Ettingen','Ettiswil','Etziken','Fahrni','Fahrwangen','Fällanden','Farnern','Fehraltorf','Fehren','Felben-Wellhausen','Feldbrunnen-St. Niklaus','Felsberg','Ferden','Ferenbalm','Ferrera','Feuerthalen','Feusisberg','Fideris','Fiesch','Fieschertal','Finsterhennen','Fischbach','Fischbach-Göslikon','Fischenthal','Fischingen','Fisibach','Fislisbach','Flaach','Fläsch','Flawil','Flerden','Flims','Flüelen','Flühli','Flumenthal','Flums','Flurlingen','Forst-Längenbühl','Fräschels','Fraubrunnen','Frauenfeld','Frauenkappelen','Freienbach','Freienstein-Teufen','Freienwil','Freimettigen','Frenkendorf','Frick','Frutigen','Fulenbach','Füllinsdorf','Full-Reuenthal','Furna','Fürstenau','Gächlingen','Gachnang','Gais','Gaiserwald','Galgenen','Gampel-Bratsch','Gampelen','Gams','Gansingen','Gebenstorf','Gelterkinden','Geltwil','Gempen','Gerlafingen','Geroldswil','Gersau','Gerzensee','Geuensee','Giebenach','Giffers','Gipf-Oberfrick','Gisikon','Giswil','Glarus','Glarus Nord','Glarus Süd','Glattfelden','Goldach','Gommiswald','Goms','Gondiswil','Gonten','Gontenschwil','Göschenen','Gossau (SG)','Gossau (ZH)','Gottlieben','Graben','Grabs','Grächen','Gränichen','Greifensee','Grellingen','Grenchen','Greng','Grengiols','Greppen','Gretzenbach','Grindel','Grindelwald','Grossaffoltern','Grossdietwil','Grosshöchstetten','Grosswangen','Grub (AR)','Grüningen','Grüsch','Gsteig','Gsteigwiler','Guggisberg','Gündlischwand','Günsberg','Gunzgen','Gurbrü','Gurmels','Gurtnellen','Gurzelen','Guttannen','Guttet-Feschel','Güttingen','Habkern','Habsburg','Häfelfingen','Hagenbuch','Hägendorf','Häggenschwil','Hägglingen','Hagneck','Hallau','Hallwil','Halten','Härkingen','Hasle (LU)','Hasle bei Burgdorf','Hasliberg','Hauenstein-Ifenthal','Hauptwil-Gottshaus','Hausen (AG)','Hausen am Albis','Häutligen','Hedingen','Hefenhofen','Heiden','Heiligenschwendi','Heimberg','Heimenhausen','Heimiswil','Heitenried','Hellikon','Hellsau','Hemishofen','Hemmiken','Hendschiken','Henggart','Herbetswil','Herbligen','Herdern','Hergiswil (NW)','Hergiswil bei Willisau','Herisau','Hermrigen','Herrliberg','Hersberg','Herznach-Ueken','Herzogenbuchsee','Hettlingen','Hildisrieden','Hilterfingen','Himmelried','Hindelbank','Hinwil','Hirschthal','Hittnau','Hitzkirch','Hochdorf','Hochfelden','Höchstetten','Hochwald','Hofstetten bei Brienz','Hofstetten-Flüh','Hohenrain','Hohentannen','Holderbank (AG)','Holderbank (SO)','Hölstein','Holziken','Homberg','Hombrechtikon','Homburg','Horgen','Höri','Horn','Horrenbach-Buchen','Horriwil','Horw','Hospental','Hubersdorf','Hundwil','Hünenberg','Hüniken','Hüntwangen','Hunzenschwil','Hüttikon','Hüttlingen','Huttwil','Hüttwilen','Iffwil','Ilanz/Glion','Illgau','Illnau-Effretikon','Inden','Ingenbohl','Inkwil','Innerthal','Innertkirchen','Ins','Interlaken','Inwil','Ipsach','Iseltwald','Isenthal','Islisberg','Itingen','Ittigen','Jaberg','Jaun','Jegenstorf','Jenaz','Jenins','Jens','Jonen','Jonschwil','Kaiseraugst','Kaisten','Kallern','Kallnach','Kaltbrunn','Kammersrohr','Kandergrund','Kandersteg','Känerkinden','Kappel (SO)','Kappel am Albis','Kappelen','Kaufdorf','Kehrsatz','Kemmental','Kernenried','Kerns','Kerzers','Kesswil','Kestenholz','Kienberg','Kiesen','Kilchberg (BL)','Kilchberg (ZH)','Killwangen','Kippel','Kirchberg (BE)','Kirchberg (SG)','Kirchdorf (BE)','Kirchleerau','Kirchlindach','Kleinandelfingen','Kleinbösingen','Kleinlützel','Klingnau','Klosters','Kloten','Knonau','Knutwil','Koblenz','Kölliken','Köniz','Konolfingen','Koppigen','Kradolf-Schönenberg','Krattigen','Krauchthal','Kreuzlingen','Kriechenwil','Kriegstetten','Kriens','Küblis','Künten','Küsnacht (ZH)','Küssnacht (SZ)','Küttigen','La Punt Chamues-ch','Laax','Lachen','Lalden','Lampenberg','Landiswil','Landquart','Langenbruck','Langendorf','Langenthal','Langnau am Albis','Langnau im Emmental','Langrickenbach','Lantsch/Lenz','Lauenen','Lauerz','Läufelfingen','Laufen','Laufenburg','Laufen-Uhwiesen','Laupen','Laupersdorf','Lauperswil','Lausen','Lauterbrunnen','Lauwil','Lax','Leibstadt','Leimbach (AG)','Leissigen','Lengnau (AG)','Lengnau (BE)','Lengwil','Lenk','Lenzburg','Leuggern','Leuk','Leukerbad','Leutwil','Leuzigen','Lichtensteig','Liedertswil','Liesberg','Liestal','Ligerz','Lindau','Linden','Lohn (SH)','Lohn-Ammannsegg','Löhningen','Lommis','Lommiswil','Lostorf','Lotzwil','Lufingen','Lungern','Lupfig','Lupsingen','Lüscherz','Lüsslingen-Nennigkofen','Luterbach','Lüterkofen-Ichertswil','Luthern','Lütisburg','Lütschental','Lützelflüh','Lutzenberg','Luzein','Luzern','Lyss','Lyssach','Madiswil','Madulain','Magden','Mägenwil','Maienfeld','Maisprach','Malans','Malters','Mammern','Mandach','Männedorf','Marbach (SG)','Märstetten','Marthalen','Maschwanden','Masein','Matten bei Interlaken','Mattstetten','Matzendorf','Matzingen','Mauensee','Maur','Meggen','Meienried','Meierskappel','Meikirch','Meilen','Meinisberg','Meiringen','Meisterschwanden','Melchnau','Mellikon','Mellingen','Mels','Meltingen','Menziken','Menzingen','Menznau','Merenschwand','Merishausen','Merzligen','Messen','Mettauertal','Mettmenstetten','Metzerlen-Mariastein','Mirchel','Möhlin','Mönchaltorf','Mönthal','Moosleerau','Moosseedorf','Mörel-Filet','Mörigen','Möriken-Wildegg','Morschach','Mörschwil','Mosnang','Muhen','Mühlau','Mühleberg','Müllheim','Mülligen','Mümliswil-Ramiswil','Mumpf','Münchenbuchsee','Münchenstein','Münchenwiler','Münchwilen (AG)','Münchwilen (TG)','Münsingen','Münsterlingen','Muntelier','Muntogna da Schons','Müntschemier','Muolen','Muotathal','Murgenthal','Muri (AG)','Muri bei Bern','Murten','Muttenz','Naters','Nebikon','Neckertal','Neerach','Neftenbach','Nenzlingen','Nesslau','Neuendorf','Neuenegg','Neuenhof','Neuenkirch','Neuhausen am Rheinfall','Neuheim','Neunforn','Neunkirch','Nidau','Niederbipp','Niederbuchsiten','Niederbüren','Niederdorf','Niedergesteln','Niederglatt','Niedergösgen','Niederhasli','Niederhelfenschwil','Niederhünigen','Niederlenz','Niedermuhlern','Niederönz','Niederried bei Interlaken','Niederrohrdorf','Niederweningen','Niederwil (AG)','Nottwil','Nuglar-St. Pantaleon','Nunningen','Nürensdorf','Nusshof','Oberägeri','Oberbalm','Oberbipp','Oberbuchsiten','Oberbüren','Oberburg','Oberdiessbach','Oberdorf (BL)','Oberdorf (NW)','Oberdorf (SO)','Oberegg','Oberembrach','Oberems','Oberengstringen','Oberentfelden','Obergerlafingen','Oberglatt','Obergoms','Obergösgen','Oberhallau','Oberhof','Oberhofen am Thunersee','Oberhünigen','Oberiberg','Oberkirch','Oberkulm','Oberlangenegg','Oberlunkhofen','Obermumpf','Oberried am Brienzersee','Oberrieden','Oberriet (SG)','Oberrohrdorf','Oberrüti','Obersaxen Mundaun','Obersiggenthal','Oberthal','Oberuzwil','Oberweningen','Oberwil (BL)','Oberwil bei Büren','Oberwil im Simmental','Oberwil-Lieli','Obfelden','Ochlenberg','Oekingen','Oensingen','Oeschenbach','Oeschgen','Oetwil am See','Oetwil an der Limmat','Oftringen','Olsberg','Olten','Oltingen','Opfikon','Oppligen','Ormalingen','Orpund','Ossingen','Ostermundigen','Otelfingen','Othmarsingen','Ottenbach','Pfäfers','Pfäffikon','Pfaffnau','Pfeffingen','Pfungen','Pfyn','Pieterlen','Plaffeien','Plasselb','Pohlern','Pontresina','Port','Pratteln','Quarten','Radelfingen','Rafz','Rain','Ramlinsburg','Ramsen','Randa','Raperswilen','Rapperswil (BE)','Rapperswil-Jona','Raron','Rebévelier','Realp','Rebstein','Recherswil','Rechthalten','Regensberg','Regensdorf','Rehetobel','Reichenbach im Kandertal','Reichenburg','Reiden','Reigoldswil','Reinach (AG)','Reinach (BL)','Reisiswil','Reitnau','Remetschwil','Remigen','Reute (AR)','Reutigen','Rhäzüns','Rheinau','Rheineck','Rheinfelden','Rheinwald','Richterswil','Rickenbach (BL)','Rickenbach (LU)','Rickenbach (SO)','Rickenbach (TG)','Rickenbach (ZH)','Ried bei Kerzers','Ried-Brig','Riederalp','Riedholz','Riehen','Riemenstalden','Rifferswil','Riggisberg','Ringgenberg (BE)','Riniken','Risch','Rodersdorf','Roggenburg','Roggliswil','Roggwil (BE)','Roggwil (TG)','Rohrbach','Rohrbachgraben','Romanshorn','Römerswil','Romoos','Rongellen','Root','Rorbas','Rorschach','Rorschacherberg','Röschenz','Röthenbach im Emmental','Rothenbrunnen','Rothenburg','Rothenfluh','Rothenthurm','Rothrist','Rottenschwil','Rubigen','Rüderswil','Rüdlingen','Rudolfstetten-Friedlisberg','Rüdtligen-Alchenflüh','Rüeggisberg','Rüegsau','Rüfenach','Rumendingen','Rumisberg','Rümlang','Rümlingen','Rünenberg','Rupperswil','Rüschegg','Rüschlikon','Russikon','Ruswil','Rüthi (SG)','Rüti (ZH)','Rüti bei Büren','Rüti bei Lyssach','Rütschelen','Rüttenen','Saanen','Saas-Almagell','Saas-Balen','Saas-Fee','Saas-Grund','Sachseln','Safenwil','Safiental','Safnern','Salenstein','Salgesch','Salmsach','Samedan','Samnaun','Sargans','Sarmenstorf','Sarnen','Sattel','Saxeten','Schaffhausen','Schafisheim','S-chanf','Schangnau','Schänis','Scharans','Schattdorf','Schattenhalb','Schelten','Schenkon','Scheuren','Schiers','Schinznach','Schlatt (TG)','Schlatt (ZH)','Schlatt-Haslen','Schleinikon','Schleitheim','Schlierbach','Schlieren','Schlossrued','Schluein','Schmerikon','Schmiedrued','Schmitten (FR)','Schmitten (GR)','Schneisingen','Schnottwil','Schöfflisdorf','Schöftland','Schönenbuch','Schönengrund','Schönenwerd','Schongau','Schönholzerswilen','Schötz','Schübelbach','Schupfart','Schüpfen','Schüpfheim','Schwaderloch','Schwadernau','Schwanden bei Brienz','Schwarzenberg','Schwarzenburg','Schwarzhäusern','Schwellbrunn','Schwende-Rüte','Schwerzenbach','Schwyz','Seeberg','Seedorf (BE)','Seedorf (UR)','Seegräben','Seehof','Seelisberg','Seengen','Seewen','Seewis im Prättigau','Seftigen','Seltisberg','Selzach','Sempach','Sennwald','Seon','Seuzach','Sevelen','Siblingen','Siglistorf','Signau','Sigriswil','Silenen','Sils im Domleschg','Sils im Engadin/Segl','Silvaplana','Simplon','Sins','Sirnach','Siselen','Sisikon','Sissach','Sisseln','Solothurn','Sommeri','Speicher','Spiez','Spiringen','Spreitenbach','St. Gallen','St. Margrethen','St. Moritz','St. Niklaus','St. Silvester','St. Stephan','St. Ursen','Stadel','Stäfa','Staffelbach','Stalden (VS)','Staldenried','Stallikon','Stammheim','Stans','Stansstad','Starrkirch-Wil','Staufen','Steckborn','Steffisburg','Steg-Hohtenn','Stein (AG)','Stein (AR)','Stein am Rhein','Steinach','Steinen','Steinerberg','Steinhausen','Steinmaur','Stetten (AG)','Stetten (SH)','Stettfurt','Stettlen','Stocken-Höfen','Strengelbach','Studen (BE)','Stüsslingen','Subingen','Sufers','Suhr','Sulgen','Sumiswald','Sursee','Sutz-Lattrigen','Tafers','Tägerig','Tägerwilen','Tamins','Täsch','Täuffelen','Tecknau','Tegerfelden','Tenniken','Tentlingen','Termen','Teufen (AR)','Teufenthal (AG)','Teuffenthal (BE)','Thal','Thalheim (AG)','Thalheim an der Thur','Thalwil','Thayngen','Therwil','Thierachern','Thörigen','Thun','Thundorf','Thunstetten','Thurnen','Thürnen','Thusis','Titterten','Tobel-Tägerschen','Toffen','Törbel','Trachselwald','Trasadingen','Treiten','Triengen','Trimbach','Trimmis','Trin','Trogen','Trub','Trubschachen','Trüllikon','Truttikon','Tschappina','Tschugg','Tübach','Tuggen','Tujetsch','Turbenthal','Turtmann-Unterems','Twann-Tüscherz','Udligenswil','Ueberstorf','Uebeschi','Uerkheim','Uesslingen-Buch','Uetendorf','Uetikon am See','Uezwil','Ufhusen','Uitikon','Ulmiz','Unterägeri','Unterbäch','Untereggen','Unterengstringen','Unterentfelden','Unteriberg','Unterkulm','Unterlangenegg','Unterlunkhofen','Unterramsern','Unterschächen','Unterseen','Untersiggenthal','Untervaz','Urdorf','Urmein','Urnäsch','Ursenbach','Urtenen-Schönbühl','Uster','Uttigen','Uttwil','Utzenstorf','Uznach','Uzwil','Vals','Varen','Vaz/Obervaz','Vechigen','Veltheim (AG)','Villigen','Villmergen','Villnachern','Vilters-Wangs','Vinelz','Visp','Visperterminen','Vitznau','Volken','Volketswil','Vordemwald','Vorderthal','Wachseldorn','Wädenswil','Wagenhausen','Wahlen','Walchwil','Wald (AR)','Wald (BE)','Wald (ZH)','Waldenburg','Wäldi','Waldkirch','Waldstatt','Walenstadt','Walkringen','Wallbach','Wallisellen','Walliswil bei Niederbipp','Walliswil bei Wangen','Walperswil','Waltenschwil','Walterswil (BE)','Walterswil (SO)','Walzenhausen','Wangen (SZ)','Wangen an der Aare','Wangen bei Olten','Wangen-Brüttisellen','Wängi','Wartau','Warth-Weiningen','Wassen','Wasterkingen','Wattenwil','Wattwil','Wauwil','Weesen','Wegenstetten','Weggis','Weiach','Weinfelden','Weiningen (ZH)','Weisslingen','Welschenrohr-Gänsbrunnen','Wengi','Wenslingen','Werthenstein','Wettingen','Wettswil am Albis','Wetzikon (ZH)','Wichtrach','Widen','Widnau','Wiedlisbach','Wiesendangen','Wiggiswil','Wigoltingen','Wikon','Wil (SG)','Wil (ZH)','Wila','Wilchingen','Wildberg','Wilderswil','Wildhaus-Alt St. Johann','Wilen (TG)','Wiler (Lötschen)','Wiler bei Utzenstorf','Wileroltigen','Wiliberg','Willadingen','Willisau','Wimmis','Windisch','Winkel','Wintersingen','Winterthur','Winznau','Wisen (SO)','Wittenbach','Witterswil','Wittinsburg','Wittnau','Wohlen','Wohlen bei Bern','Wohlenschwil','Wolfenschiessen','Wolfhalden','Wölflinswil','Wolfwil','Wolhusen','Wollerau','Worb','Worben','Wünnewil-Flamatt','Wuppenau','Würenlingen','Würenlos','Wynau','Wynigen','Wyssachen','Zäziwil','Zeglingen','Zeihen','Zeiningen','Zell (LU)','Zell (ZH)','Zeneggen','Zermatt','Zernez','Zetzwil','Ziefen','Zielebach','Zihlschlacht-Sitterdorf','Zillis-Reischen','Zizers','Zofingen','Zollikofen','Zollikon','Zuchwil','Zufikon','Zug','Zullwil','Zumikon','Zunzgen','Zuoz','Zürich','Zurzach','Zuzgen','Zuzwil (BE)','Zuzwil (SG)','Zweisimmen','Zwingen','Zwischbergen');

		foreach ($cities as $city) {
			$choices[] = array('text' => $city, 'value' => $city);
		}

		$field->placeholder = __('Select a city', 'planet4-child-theme-switzerland');
		$field->choices     = $choices;
	}

	return $form;
}

add_filter( 'gform_pre_render', 'gpch_populate_cities' );
add_filter( 'gform_pre_validation', 'gpch_populate_cities' );
add_filter( 'gform_pre_submission_filter', 'gpch_populate_cities' );
add_filter( 'gform_admin_pre_render', 'gpch_populate_cities' );

